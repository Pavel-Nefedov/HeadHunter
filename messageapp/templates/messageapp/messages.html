{% extends "base.html" %}
{% load static %}

{% block header %}
    {% include 'mainapp/includes/inc_header.html' %}
{% endblock %}

{% block site_content %}
    <div class="container col-xxl-8 px-4 py-5">
        <div class="row flex-lg-row-reverse align-items-center g-5 py-5">

            {% load i18n %}
            {% if not chat %}
                <div class="panel panel-body">
                    {% trans "Невозможно начать беседу. Не найден пользователь или вы не имеете доступа к данной беседе." %}
                </div>
            {% else %}
                {% load tz %}
                {% if chat %}
                    <div id="messages" class="panel">
                        <div id="innerMessages">
                            {% for message in chat.message_set.all %}
                                {% include 'messageapp/message.html' with message_item=message %}
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
                <div id="message_form">
                    <form id="message-form" class="panel panel-body" method="post">
                        {% load bootstrap5 %}
                        {% csrf_token %}
                        {% bootstrap_form form %}
                        <button type="submit" class="btn btn-default btn-sm"
                                onclick="return ETextEditor.validateForm('message-form')"><span
                                class="ico ico-comment"></span>{% trans "Отправить" %}</button>
                    </form>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}

{% block footer %}
    {% include 'mainapp/includes/inc_footer.html' %}
{% endblock %}